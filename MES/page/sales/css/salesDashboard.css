/* page/sales/css/salesDashboard.css - FULL VERSION (Fixed & Separated) */

/* ==========================================================================
   1. RESET & MAIN LAYOUT
   ========================================================================== */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden !important; 
}

body, table {
    font-family: 'Sarabun', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.page-container {
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

#main-content {
    flex: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.content-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column; 
    overflow: hidden; 
    padding: 1rem !important;
    height: 100%; 
    min-height: 0; 
}

/* ==========================================================================
   2. CARDS LAYOUT
   ========================================================================== */
.card.mb-3 {
    flex: 0 0 auto; 
    margin-bottom: 1rem !important;
}

.card.table-card {
    flex: 1; 
    min-height: 0; 
    height: auto !important; 
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border: 1px solid #dee2e6;
}

/* ==========================================================================
   3. TABLE CONTAINER
   ========================================================================== */
.table-responsive-custom {
    flex: 1;
    width: 100%;
    height: 100%;
    overflow-x: auto !important;
    overflow-y: auto !important;
    position: relative;
    background-color: #fff;
    padding-bottom: 5px;
}

.table-responsive-custom table {
    width: max-content !important; 
    min-width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

/* จัดกึ่งกลางข้อมูลในตารางทั้งหมด */
.table-responsive-custom table th,
.table-responsive-custom table td {
    text-align: center !important;      
    vertical-align: middle !important;  
    background-color: #fff; /* พื้นหลังทึบเริ่มต้น */
}

/* ==========================================================================
   4. STICKY LOGIC (GENERAL)
   ========================================================================== */
thead.sticky-top {
    position: static !important;
    z-index: auto !important;
}

/* Header Cells (General) */
thead.sticky-top th {
    position: sticky !important;
    top: 0 !important;
    z-index: 500 !important; /* Header ปกติ */
    background-color: #f8f9fa !important;
    border-bottom: 2px solid #dee2e6;
    box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.1);
}

/* Sticky Column Cells (Body) */
tbody td.sticky-col-left-1,
tbody td.sticky-col-left-2,
tbody td.sticky-col-left-3,
tbody td.sticky-col-right-1,
tbody td.sticky-col-right-2 {
    position: sticky !important;
    z-index: 100 !important; /* สูงกว่าข้อมูลปกติ */
    background-color: #fff;
    background-clip: padding-box;
}

/* Sticky Column Cells (Header) - ต้องสูงที่สุด */
thead.sticky-top th.sticky-col-left-1,
thead.sticky-top th.sticky-col-left-2,
thead.sticky-top th.sticky-col-left-3,
thead.sticky-top th.sticky-col-right-1,
thead.sticky-top th.sticky-col-right-2 {
    position: sticky !important;
    z-index: 2000 !important; /* สูงที่สุด ทับทุกอย่าง */
    background-color: #f8f9fa !important;
    top: 0 !important;
}

/* ==========================================================================
   5. SPECIFIC LAYOUT: SALES DASHBOARD (.sales-table)
   [Col 1: Drag(50px)] [Col 2: PO(160px)] [Col 3: Conf(80px)]
   ========================================================================== */

/* Col 1: Drag Handle */
.sales-table .sticky-col-left-1 { 
    left: 0 !important; 
    width: 50px !important; min-width: 50px !important; max-width: 50px !important;
    border-right: 1px solid #dee2e6;
}

/* Col 2: PO Number (Start @ 50px) */
.sales-table .sticky-col-left-2 { 
    left: 50px !important; 
    width: 160px !important; min-width: 160px !important; max-width: 160px !important;
    border-right: 1px solid #dee2e6;
}

/* Col 3: Confirmed (Start @ 210px) */
.sales-table .sticky-col-left-3 { 
    left: 210px !important; 
    width: 80px !important; min-width: 80px !important; max-width: 80px !important;
    border-right: 2px solid #dee2e6;
    box-shadow: 4px 0 5px -2px rgba(0,0,0,0.1); /* เงาจบที่นี่ */
}

/* Corner Fixes (Shadows for Header) */
.sales-table thead th.sticky-col-left-3 {
    box-shadow: 4px 2px 5px -2px rgba(0,0,0,0.1);
}

/* ==========================================================================
   6. SPECIFIC LAYOUT: SHIPPING SCHEDULE (Default or .shipping-table)
   [Col 1: Load(45px)] [Col 2: Prod(45px)] [Col 3: PO(150px)]
   ========================================================================== */

/* เพื่อความชัวร์ ให้ Shipping ใช้ Default หรือ Class เฉพาะก็ได้ 
   ถ้าไม่ใส่ class .sales-table จะเข้าเงื่อนไขนี้ (ถ้าเราเขียน selector ให้ดี) 
   แต่เพื่อความปลอดภัย ผมจะใช้ :not(.sales-table) หรือกำหนด class ใหม่ */

/* Col 1: Load (Minimal) */
table:not(.sales-table) .sticky-col-left-1 { 
    left: 0 !important; 
    width: 45px !important; min-width: 45px !important; max-width: 45px !important;
    border-right: 1px solid #dee2e6;
    padding: 4px !important;
}

/* Col 2: Prod (Minimal) - Start @ 45px */
table:not(.sales-table) .sticky-col-left-2 { 
    left: 45px !important; 
    width: 45px !important; min-width: 45px !important; max-width: 45px !important;
    border-right: 1px solid #dee2e6;
    padding: 4px !important;
}

/* Col 3: PO Number - Start @ 90px */
table:not(.sales-table) .sticky-col-left-3 { 
    left: 90px !important; 
    width: 150px !important; min-width: 150px !important; max-width: 150px !important;
    border-right: 2px solid #dee2e6; 
    box-shadow: 4px 0 5px -2px rgba(0,0,0,0.1); 
}

/* Corner Fixes */
table:not(.sales-table) thead th.sticky-col-left-3 {
    box-shadow: 4px 2px 5px -2px rgba(0,0,0,0.1);
}

/* --- RIGHT COLUMNS (Shared) --- */
.sticky-col-right-1 {
    right: 0 !important;
    width: 100px !important; min-width: 100px !important;
    border-left: 1px solid #dee2e6;
}

.sticky-col-right-2 {
    right: 108px !important; /* 100 + border approx */
    width: 110px !important; min-width: 110px !important;
    border-left: 2px solid #dee2e6;
    box-shadow: -4px 0 5px -2px rgba(0,0,0,0.1); 
}

/* Corner Fixes (Right) */
thead th.sticky-col-right-2 {
    box-shadow: -4px 2px 5px -2px rgba(0,0,0,0.1); 
}

/* ==========================================================================
   7. HOVER & UTILITIES
   ========================================================================== */
tr:hover td {
    background-color: var(--bs-tertiary-bg) !important;
}

/* Scrollbar */
.table-responsive-custom::-webkit-scrollbar { width: 16px; height: 16px; }
.table-responsive-custom::-webkit-scrollbar-track { background: #f1f1f1; border: 1px solid #dee2e6; }
.table-responsive-custom::-webkit-scrollbar-thumb { background-color: #adb5bd; border: 3px solid #f1f1f1; border-radius: 10px; }
.table-responsive-custom::-webkit-scrollbar-thumb:hover { background-color: #6c757d; cursor: pointer; }
.table-responsive-custom::-webkit-scrollbar-corner { background: #f1f1f1; }

/* บังคับ input วันที่และเวลาในตารางให้เล็กและกระชับ */
.shipping-table input[type="text"].datepicker {
    width: 85px !important;
    font-size: 0.85rem !important;
    padding: 2px !important;
    text-align: center;
}

.shipping-table input[type="time"] {
    width: 55px !important; /* ปรับลดความกว้าง */
    font-size: 0.85rem !important;
    padding: 0 2px !important; /* ลด padding ซ้ายขวา */
}

/* ถ้ายังเบียด ให้ลองลดขนาดลูกศรใน input time (เฉพาะ Chrome/Edge) */
.shipping-table input[type="time"]::-webkit-calendar-picker-indicator {
    width: 10px;
    height: 10px;
    padding: 0;
    margin: 0;
}

/* Inputs */
.editable-input {
    width: 100%; border: 1px solid transparent; background: transparent;
    padding: 2px 4px; border-radius: 3px; font-size: 0.9rem; text-align: center;
}
.editable-input:focus, .editable-input:hover { border-color: #ced4da; background-color: #fff; outline: none; }

/* Badges & Icons */
.status-badge { border: none; border-radius: 50px; padding: 4px 12px; font-size: 0.75rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
.status-badge.bg-pending { background-color: #fff3cd; color: #856404; }

.kpi-card { transition: all 0.3s ease; border-left: 4px solid transparent; }
.kpi-card:hover { transform: translateY(-3px); }
.kpi-card.active, .kpi-card.ring-2 { border-width: 2px !important; background-color: #f8f9fa; box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important; transform: translateY(-2px); }

.bg-delay-solid { background-color: #f8d7da !important; color: #842029; }

/* Minimal Icons */
.btn-icon-minimal {
    width: 30px; height: 30px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    border: 1px solid transparent; transition: all 0.2s; margin: 0 auto; font-size: 0.8rem;
}
.btn-icon-minimal:hover { transform: scale(1.1); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.status-wait { background-color: #f8f9fa; border-color: #dee2e6; color: #adb5bd; }
.status-done { background-color: #d1e7dd; border-color: #198754; color: #198754; }

/* Animation */
@keyframes blink-animation { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
.blink { animation: blink-animation 1.5s infinite; }

/* Media Queries */
@media (min-width: 992px) { .col-lg-20-percent { flex: 0 0 auto; width: 20%; } }
@media (max-width: 992px) { .col-lg-20-percent { width: 33.33%; } }
@media (max-width: 576px) { .col-lg-20-percent { width: 50%; } }